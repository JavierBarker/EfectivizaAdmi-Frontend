<!-- component -->

<div class="w-full flex justify-center">
    <a (click)="showLoanModal = true" class="btn btn-primary ">Agregar Prestamo Cliente</a>
</div>

<section class="text-gray-600 body-font">
    <div class="container px-5 py-24 mx-auto">
        <div class="flex flex-wrap -m-4">
            <div *ngFor="let loans of loansRequest" class="xl:w-1/3 md:w-1/2 p-4">
                <div class="border border-gray-200 p-6 rounded-lg">
                    <div
                        class="w-10 h-10 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 mb-4">
                        <svg *ngIf="loans.typeLoan === 'Vehículo'" fill="none" stroke="currentColor"
                            stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-6 h-6"
                            viewBox="0 0 24 24">
                            <path
                                d="M23.5 7c.276 0 .5.224.5.5v.511c0 .793-.926.989-1.616.989l-1.086-2h2.202zm-1.441 3.506c.639 1.186.946 2.252.946 3.666 0 1.37-.397 2.533-1.005 3.981v1.847c0 .552-.448 1-1 1h-1.5c-.552 0-1-.448-1-1v-1h-13v1c0 .552-.448 1-1 1h-1.5c-.552 0-1-.448-1-1v-1.847c-.608-1.448-1.005-2.611-1.005-3.981 0-1.414.307-2.48.946-3.666.829-1.537 1.851-3.453 2.93-5.252.828-1.382 1.262-1.707 2.278-1.889 1.532-.275 2.918-.365 4.851-.365s3.319.09 4.851.365c1.016.182 1.45.507 2.278 1.889 1.079 1.799 2.101 3.715 2.93 5.252zm-16.059 2.994c0-.828-.672-1.5-1.5-1.5s-1.5.672-1.5 1.5.672 1.5 1.5 1.5 1.5-.672 1.5-1.5zm10 1c0-.276-.224-.5-.5-.5h-7c-.276 0-.5.224-.5.5s.224.5.5.5h7c.276 0 .5-.224.5-.5zm2.941-5.527s-.74-1.826-1.631-3.142c-.202-.298-.515-.502-.869-.566-1.511-.272-2.835-.359-4.441-.359s-2.93.087-4.441.359c-.354.063-.667.267-.869.566-.891 1.315-1.631 3.142-1.631 3.142 1.64.313 4.309.497 6.941.497s5.301-.184 6.941-.497zm2.059 4.527c0-.828-.672-1.5-1.5-1.5s-1.5.672-1.5 1.5.672 1.5 1.5 1.5 1.5-.672 1.5-1.5zm-18.298-6.5h-2.202c-.276 0-.5.224-.5.5v.511c0 .793.926.989 1.616.989l1.086-2z" />
                        </svg>
                        <svg *ngIf="loans.typeLoan === 'Inmobiliario'" fill="none" stroke="currentColor"
                            stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-6 h-6"
                            viewBox="0 0 24 24">
                            <path d="M21 13v10h-6v-6h-6v6h-6v-10h-3l12-12 12 12h-3zm-1-5.907v-5.093h-3v2.093l3 3z" />
                        </svg>
                        <svg *ngIf="loans.typeLoan === 'Joyería'" xmlns="http://www.w3.org/2000/svg"
                            stroke="currentColor" stroke-linecap="round" fill="currentColor" width="24" height="24"
                            viewBox="0 0 24 24">
                            <path
                                d="M7.388 9h9.225l-4.613 14-4.612-14zm.612-2h8l-4-5.333-4 5.333zm10.5 0h5.5l-6-6h-4l4.5 6zm-13 0l4.5-6h-3.916l-6.084 6h5.5zm-5.5 2l9.234 12-3.955-12h-5.279zm18.721 0l-3.924 12 9.203-12h-5.279z" />
                        </svg>

                        <svg *ngIf="loans.typeLoan === 'Mobiliario'" width="24" height="24"
                            xmlns="http://www.w3.org/2000/svg" fill="currentColor" clip-rule="evenodd">
                            <path
                                d="M24 19v-7c0-.265-.105-.52-.293-.707-.187-.188-.442-.293-.707-.293h-22c-.265 0-.52.105-.707.293-.188.187-.293.442-.293.707v7h1v-2h22v2h1zm-1-6.5c0-.133-.053-.26-.146-.354-.094-.093-.221-.146-.354-.146h-21c-.133 0-.26.053-.354.146-.093.094-.146.221-.146.354v3.5h22v-3.5zm-20-2.5v-3.5c0-.276.224-.5.5-.5h17c.276 0 .5.224.5.5v3.5h1v-4c0-.265-.105-.52-.293-.707-.187-.188-.442-.293-.707-.293h-18c-.265 0-.52.105-.707.293-.188.187-.293.442-.293.707v4h1zm2 0h6v-2c0-.552-.448-1-1-1h-4c-.552 0-1 .448-1 1v2zm8 0h6v-2c0-.552-.448-1-1-1h-4c-.552 0-1 .448-1 1v2zm-3-1v-.6c0-.221-.179-.4-.4-.4h-3.2c-.221 0-.4.179-.4.4v.6h4zm8 0v-.6c0-.221-.179-.4-.4-.4h-3.2c-.221 0-.4.179-.4.4v.6h4z" />
                        </svg>

                        <svg *ngIf="loans.typeLoan === 'Línea Blanca'" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" >
                            <path
                                d="M22 4v12h-20v-12h20zm2-2h-24v16h24v-16zm-17.836 5h5.673v1.418h-2.01v4.582h-1.653v-4.582h-2.01v-1.418zm9.961 0l-1.158 3.653-1.151-3.653h-1.701l1.942 6h1.792l1.986-6h-1.71zm-9.125 13c1 1.194 2.862 2 5 2s4-.806 5-2h-10z" />
                        </svg>

                    </div>
                    <h2 class="text-lg text-gray-900 font-medium title-font mb-2">{{loans.typeLoan}}</h2>
                    <p class="leading-relaxed text-base">Tipo: {{loans.description.type}}</p>
                    <p *ngIf="loans.typeLoan === 'Vehículo'" class="leading-relaxed text-base">Modelo:
                        {{loans.description.mark}}</p>
                    <p *ngIf="loans.typeLoan === 'Vehículo'" class="leading-relaxed text-base">Modelo:
                        {{loans.description.model}}</p>
                    <p *ngIf="loans.typeLoan === 'Vehículo'" class="leading-relaxed text-base">Año:
                        {{loans.description.year}}</p>


                    <p *ngIf="loans.typeLoan != 'Vehículo'" class="leading-relaxed text-base">Descripción:
                        {{loans.description.description}}</p>
                    <p *ngIf="loans.typeLoan === 'Inmobiliario'" class="leading-relaxed text-base">Dirección:
                        {{loans.description.direction}}</p>

                    <div *ngIf="loans.canceled === false" class="alert alert-info">
                        <div class="flex-1 font-bold">
                          <label>Estado de Cancelación: {{loans.canceled}}</label>
                        </div>
                    </div>

                    <div *ngIf="loans.canceled === true" class="alert alert-success">
                        <div class="flex-1 font-bold">
                          <label>Estado de Cancelación: {{loans.canceled}}</label>
                        </div>
                      </div>
                </div>
            </div>
        </div>
    </div>
</section>

<div data-theme="light" class="modal-container">
    <input type="checkbox" id="search-modal" [checked]="showLoanModal" class="modal-toggle">
    <div class="modal bg-opacity-50 bg-blacks">
        <div class="modal-box p-0 pt-6 text-left">

            <div class="w-full bg-grey-500">
                <div class="container mx-auto py-8">
                    <div class="w-96 mx-auto bg-white rounded border border-green-500">
                        <div class="p-5">
                            <ul class="w-full steps">
                                <li class="step step-info">Paso 1</li>
                                <li *ngIf="step === 0" class="step">Paso 2</li>
                                <li *ngIf="step === 1" class="step step-info">Shrink the moon</li>
                            </ul>
                            <form class="mt-8 p-4" [formGroup]="loanForm">
                                <div *ngIf="step === 0">

                                    <div class="flex flex-col md:flex-row">
                                        <div class="w-full flex-1 mx-2 svelte-1l8159u">
                                            <div class="mb-4">
                                                <label class="block text-grey-darker text-sm font-bold mb-2">ID
                                                    Usuario:</label>
                                                <input required disabled
                                                    class=" border rounded w-full py-2 px-3 text-grey-darker"
                                                    type="text" name="clientID" id="clientID" [value]="idClient"
                                                    placeholder="Ingresa el DPI">

                                            </div>

                                            <div class="mb-4">
                                                <label
                                                    class="block text-grey-darker text-sm font-bold mb-2">Monto:</label>
                                                <div class="flex items-center">
                                                    <p class="text-2xl mr-2">Q.</p>
                                                    <input required formControlName="amount"
                                                        class=" border rounded w-full py-2 px-3 text-grey-darker"
                                                        type="text" name="monto" id="monto" placeholder="0000.00">
                                                </div>

                                            </div>

                                            <div class="mb-4">
                                                <label class="block text-grey-darker text-sm font-bold mb-2">Fecha a
                                                    Pagar:</label>
                                                <!--<input  required formControlName="paymentDate"
                                                    class=" border rounded w-full py-2 px-3 text-grey-darker" type="date"
                                                    name="paymentDate" id="paymentDate" [min]="2021-09-08" placeholder="Ingresa el DPI">
                                                    -->
                                                <div class="flex items-center">
                                                    <input matInput formControlName="paymentDate" [min]="minDate"
                                                        [matDatepicker]="picker"
                                                        class=" border rounded w-full py-2 px-3 text-grey-darker">
                                                    <mat-datepicker-toggle matSuffix [for]="picker">
                                                    </mat-datepicker-toggle>
                                                    <mat-datepicker #picker></mat-datepicker>
                                                </div>
                                            </div>

                                            <div class="mb-4">
                                                <label class="block text-grey-darker text-sm font-bold mb-2">Tipo de
                                                    Prestamo:</label>
                                                <select formControlName="typeLoan" id="typeLoan" name="role"
                                                    class=" border rounded w-full py-2 px-3 text-grey-darker">
                                                    <option value="">-- Selecciona el Tipo --</option>
                                                    <option>Mobiliario</option>
                                                    <option>Inmobiliario</option>
                                                    <option>Vehículo</option>
                                                    <option>Joyería</option>
                                                    <option>Línea Blanca</option>
                                                </select>
                                                <p id=error_creater_id></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div *ngIf="step === 1">

                                    <div *ngIf="typeForm === 'Mobiliario'" class="flex flex-col md:flex-row">

                                        <div formGroupName="description" class="w-full flex-1 mx-2 svelte-1l8159u">
                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Descripción</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <textarea formControlName="description" placeholder="Descripción"
                                                    class="max-h-44 p-1 px-2 appearance-none outline-none w-full text-gray-800"></textarea>
                                            </div>

                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Tipo</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <input placeholder="Tipo" formControlName="type"
                                                    class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                                            </div>
                                        </div>
                                    </div>

                                    <div *ngIf="typeForm === 'Vehículo'" class="flex flex-col md:flex-row">

                                        <div formGroupName="description" class="w-full flex-1 mx-2 svelte-1l8159u">
                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Marca</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <input formControlName="mark" placeholder="Marca"
                                                    class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                                            </div>

                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Modelo</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <input formControlName="model" placeholder="Modelo"
                                                    class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                                            </div>

                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Año</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <input formControlName="year" placeholder="Año"
                                                    class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                                            </div>

                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Tipo</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <input formControlName="type" placeholder="Tipo"
                                                    class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                                            </div>
                                        </div>
                                    </div>

                                    <div *ngIf="typeForm === 'Joyería'" class="flex flex-col md:flex-row">

                                        <div formGroupName="description" class="w-full flex-1 mx-2 svelte-1l8159u">
                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Descripcion</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <textarea formControlName="description" placeholder="Descripción"
                                                    class="max-h-44 p-1 px-2 appearance-none outline-none w-full text-gray-800"></textarea>
                                            </div>

                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Tipo</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <input formControlName="type" placeholder="Tipo"
                                                    class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                                            </div>
                                        </div>
                                    </div>

                                    <div *ngIf="typeForm === 'Línea Blanca'" class="flex flex-col md:flex-row">

                                        <div formGroupName="description" class="w-full flex-1 mx-2 svelte-1l8159u">
                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Descripcion</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <textarea formControlName="description" placeholder="Descripción"
                                                    class="max-h-44 p-1 px-2 appearance-none outline-none w-full text-gray-800"></textarea>
                                            </div>

                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Tipo</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <input formControlName="type" placeholder="Tipo"
                                                    class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                                            </div>
                                        </div>
                                    </div>

                                    <div *ngIf="typeForm === 'Inmobiliario'" class="flex flex-col md:flex-row">

                                        <div formGroupName="description" class="w-full flex-1 mx-2 svelte-1l8159u">
                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Descripcion</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <textarea formControlName="description" placeholder="Descripción"
                                                    class="max-h-44 p-1 px-2 appearance-none outline-none w-full text-gray-800"></textarea>
                                            </div>
                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Dirección</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <input formControlName="direction" placeholder="Direccion"
                                                    class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                                            </div>

                                            <div
                                                class="font-bold text-gray-600 text-xs leading-8 uppercase h-6 mx-2 mt-3">
                                                Tipo</div>
                                            <div
                                                class="bg-white my-2 p-1 flex border border-gray-200 rounded svelte-1l8159u">
                                                <input formControlName="type" placeholder="Tipo"
                                                    class="p-1 px-2 appearance-none outline-none w-full text-gray-800">
                                            </div>
                                        </div>
                                    </div>

                                </div>


                                <div class="flex p-2 mt-4">
                                    <button *ngIf="step === 1" (click)=" previous()" class="text-base hover:scale-110 focus:outline-none flex justify-center px-4 py-2 rounded font-bold cursor-pointer
                                hover:bg-gray-200
                                bg-gray-100
                                text-gray-700
                                border duration-200 ease-in-out
                                border-gray-600 transition">Anterior</button>
                                    <div class="flex-auto flex flex-row-reverse">
                                        <button type="submit" *ngIf="step === 0" class="text-base  ml-2  hover:scale-110 focus:outline-none flex justify-center px-4 py-2 rounded font-bold cursor-pointer
                                hover:bg-teal-600
                                bg-teal-600
                                text-teal-100
                                border duration-200 ease-in-out
                                border-teal-600 transition" (click)=" next(); checkForm()">Next</button>
                                        <button type="submit" *ngIf="step === 1" class="text-base  ml-2  hover:scale-110 focus:outline-none flex justify-center px-4 py-2 rounded font-bold cursor-pointer
                                hover:bg-teal-600
                                bg-teal-600
                                text-teal-100
                                border duration-200 ease-in-out
                                border-teal-600 transition" (click)=" addLoan()">save</button>
                                        <button class="text-base hover:scale-110 focus:outline-none flex justify-center px-4 py-2 rounded font-bold cursor-pointer
                                hover:bg-teal-200
                                bg-teal-100
                                text-teal-700
                                border duration-200 ease-in-out
                                border-teal-600 transition" (click)="showLoanModal = false; cancel()">Cancelar</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>